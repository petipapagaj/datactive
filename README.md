# What is DATActive?
* Datactive keep the static data synchronized in the database
* Return with status code which show whether or not the data is identical to the data in repository
* Able to show the primary key records which corresponding data is different
* Provide help in release process to make sure static data has been released as it is in repository
* Generating data version which is a snapshot of the actual state of the database
* Able to show if there is any missing table objects in database
* Created data version can be connected to specific git commit by providing sha1

# Why the DATActive?
* Datactive is able to help when several identical databases have across the system with static data.  
* Note that works with SQL Server only

# Usage
```
EXEC Datactive.HashMatch [ [@version = ] { value }, [@showObjects =]  { 1 | 0 }]
```

### Parameter description:
* @version: specific version for previously created data versions. Latest version will be picked up from table dbo.DataVersion if no specific version attached as parameter
* @showObjects: By default Datactive only return the status code of the execution. Making @showobjects parameter true will force to return the object names where discrepancy found

# Example
``` 
DECLARE @ret INT
EXEC @ret = Datactive.HashMatch @version = '10.2', @showObjects = 1
SELECT @ret
```

# Data Version
Before every release new data version have to be generated by calling the following procedure

```
EXEC Datactive.CreateDataVersion @version = {@version}, @sha1 = {@sha1}
```
Parameter description:
* @version: data version short name, or number. (e.g major version number 10.2)
* @sha1: Created data version should be connected to git commit through sha1. To get the sha1 type: git rev-parse develop

Generated data version will be traveling with the release so it can be use as benchmark in comparison.
 
Data versions historically stored in table:

```
SELECT * FROM Datactive.DataVersion AS dv 
```

# Data format
``` 
<tables>
  <table table="table1">
    <PK>201</PK>
    <md5>0xEQH1hF4JNHhORIY4/+QA==</md5>
  </table>
 <table table="table2">
    <PK>2307475880</PK>
    <md5>EZ/iJSIk8k3j9TZrBoNnng==</md5>
  </table>
  <table table="table2">
    <PK>2307475881</PK>
    <md5>+FOnsGE9C8Gz8EInymFE8A==</md5>
  </table>
  â€¦
</tables>
```

# Return codes
Range is [101-199]

*0	OK
*-1:	Invalid parameter
*151:	Internal error
*188:	Data version already created (bold version or git sha1)
*102:	Table mismatch
*103:	PK mismatch
*104:	Data mismatch
